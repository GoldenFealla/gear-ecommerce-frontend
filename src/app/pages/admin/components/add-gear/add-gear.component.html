@let vm = (vm$ | async)!;

<div hlmCard>
    <div hlmCardHeader>
        <h2 hlmCardTitle class="text-2xl">
            <div class="flex flex-row items-center justify-between">
                <span>Add Gear</span>
            </div>
        </h2>
    </div>
    <div hlmCardContent>
        <form [formGroup]="addGearForm" action="">
            <image-form-field [control]="addGearForm.controls.image" label="Image"></image-form-field>
            <text-form-field [control]="addGearForm.controls.name" label="Name"> </text-form-field>
            <select-form-field [control]="addGearForm.controls.type" label="Type" [list]="gearTypeList" placeholder="Select gear type"></select-form-field>
            <text-form-field [control]="addGearForm.controls.brand" label="Brand"> </text-form-field>
            <text-form-field [control]="addGearForm.controls.variety" label="Variety"> </text-form-field>
            <number-form-field [control]="addGearForm.controls.price" label="Price" > </number-form-field>
            <number-form-field [control]="addGearForm.controls.discount" label="Discount" > </number-form-field>
            <number-form-field [control]="addGearForm.controls.quantity" label="Quantity" > </number-form-field>
            <ng-container [ngTemplateOutlet]="displayError"></ng-container>
        </form>
        <div class="flex flex-row items-center justify-end h-10">
            <button hlmBtn (click)="handleOnAdd()">
                @if(vm.creating) {
                    <hlm-spinner class="w-5 h-5" />
                } @else { 
                    Add 
                }
            </button>
        </div>
    </div>
</div>

<ng-template #displayError>
    @if(!vm.success && vm.message) {
    <div hlmAlert variant="destructive" class="mb-5">
        <hlm-icon hlmAlertIcon name="lucideTriangleAlert" />
        <h4 hlmAlertTitle>Error</h4>
        <p hlmAlertDesc>{{ vm.message }}</p>
    </div>
    }
</ng-template>